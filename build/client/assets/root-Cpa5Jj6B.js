import{r as l,j as e,d as y,e as k,L as i,F as b,w as v,M as N,h as w,S as L,i as C,u as M,O as S}from"./chunk-JZWAC4HX-Dc7zMzt7.js";function z({onAcceptAll:s,onRejectAll:a,onSavePreferences:n}){const[d,x]=l.useState(!1),[o,c]=l.useState(!1),[t,m]=l.useState({necessary:!0,analytics:!0,marketing:!0});l.useEffect(()=>{localStorage.getItem("cookie_consent")||x(!0)},[]);const h=r=>{const g={type:r,preferences:r==="all"?{necessary:!0,analytics:!0,marketing:!0}:r==="necessary"?{necessary:!0,analytics:!1,marketing:!1}:t,timestamp:new Date().toISOString(),version:"1.0"};localStorage.setItem("cookie_consent",JSON.stringify(g));const f=new Date;f.setFullYear(f.getFullYear()+1),document.cookie=`cookie_consent=${r};expires=${f.toUTCString()};path=/;SameSite=Lax`,x(!1)},p=()=>{h("all"),s==null||s()},u=()=>{h("necessary"),a==null||a()},j=()=>{h("custom"),n==null||n(t)};return d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40","aria-hidden":"true"}),e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"cookie-banner-title",className:"fixed bottom-0 left-0 right-0 z-50 bg-white shadow-2xl border-t border-gray-200",children:e.jsx("div",{className:"max-w-6xl mx-auto p-4 sm:p-6",children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{id:"cookie-banner-title",className:"text-lg font-semibold text-gray-900",children:"Cookie Preferences"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Close details",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select which cookie categories you want to enable. Essential cookies cannot be disabled as they are required for the site to function properly."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Essential Cookies"}),e.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded-full",children:"Always active"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Required for basic site functionality, including authentication and session management."})]}),e.jsx("div",{className:"ml-4",children:e.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"w-5 h-5 rounded border-gray-300 text-brand-600 cursor-not-allowed","aria-label":"Essential cookies (always active)"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Analytics Cookies"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Help us understand how visitors interact with the site by collecting anonymous and aggregated information."})]}),e.jsx("div",{className:"ml-4",children:e.jsx("input",{type:"checkbox",checked:t.analytics,onChange:r=>m({...t,analytics:r.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-brand-600 focus:ring-brand-500 cursor-pointer","aria-label":"Enable analytics cookies"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Marketing Cookies"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Used to show you relevant ads and measure the effectiveness of advertising campaigns."})]}),e.jsx("div",{className:"ml-4",children:e.jsx("input",{type:"checkbox",checked:t.marketing,onChange:r=>m({...t,marketing:r.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-brand-600 focus:ring-brand-500 cursor-pointer","aria-label":"Enable marketing cookies"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[e.jsx("a",{href:"/cookie-policy",className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-brand-600 text-center",children:"Read full Cookie Policy"}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-gray-700 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:"Only Essential"}),e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg transition-colors",children:"Save Preferences"})]})]}):e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{id:"cookie-banner-title",className:"text-lg font-semibold text-gray-900",children:"We use cookies"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["We use essential cookies to make our site work. With your consent, we may also use analytics cookies to improve your experience. You can accept all cookies or customize your preferences."," ",e.jsx("a",{href:"/cookie-policy",className:"text-brand-600 hover:underline",children:"Learn more"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 text-sm font-medium text-gray-700 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:"Customize"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg transition-colors",children:"Accept All"})]})]})})})]}):null}const W=5e3;function _({user:s}){var p,u,j,r;const a=y(),n=k(),d=l.useRef(!1),[x,o]=l.useState(!1);l.useEffect(()=>{if(!s||typeof window>"u")return;n.state==="idle"&&!n.data&&n.load("/api/unread");const f=setInterval(()=>{d.current||n.state==="idle"&&(d.current=!0,n.load("/api/unread"),d.current=!1)},W);return()=>{clearInterval(f)}},[s,n]);const c=((p=n.data)==null?void 0:p.unreadCount)??0;if(a.pathname==="/login"||a.pathname==="/register")return null;const t=g=>g==="/"?a.pathname==="/":a.pathname.startsWith(g),m=(s==null?void 0:s.user_type)==="tour_operator"?"/dashboard":"/my-listings";l.useEffect(()=>{o(!1)},[a.pathname]);const h=((u=s==null?void 0:s.full_name)==null?void 0:u.split(" ")[0])||"Menu";return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-50",onClick:()=>o(!1)}),e.jsxs("div",{className:`md:hidden fixed top-16 right-2 w-56 bg-white rounded-2xl shadow-xl z-50 transform transition-all duration-200 ease-out ${x?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-gray-100",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-brand-100 text-brand-600 font-semibold text-sm",children:((j=s==null?void 0:s.full_name)==null?void 0:j.charAt(0))||((r=s==null?void 0:s.email)==null?void 0:r.charAt(0))||"?"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:(s==null?void 0:s.full_name)||"User"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:(s==null?void 0:s.user_type)==="tour_operator"?"Tour Operator":"Private"})]})]}),e.jsxs("div",{className:"py-1",children:[(s==null?void 0:s.user_type)==="tour_operator"&&e.jsxs(i,{to:"/dashboard",onClick:()=>o(!1),className:"flex items-center gap-2.5 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]}),e.jsxs(i,{to:"/profile",onClick:()=>o(!1),className:"flex items-center gap-2.5 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]}),e.jsxs(i,{to:m,onClick:()=>o(!1),className:"flex items-center gap-2.5 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(s==null?void 0:s.user_type)==="tour_operator"?"My Listings":"My Listing"]}),e.jsxs(i,{to:"/saved",onClick:()=>o(!1),className:"flex items-center gap-2.5 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Saved"]}),e.jsx("div",{className:"my-1 border-t border-gray-100"}),e.jsxs(i,{to:"/settings",onClick:()=>o(!1),className:"flex items-center gap-2.5 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsxs("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),e.jsx(b,{method:"post",action:"/logout",children:e.jsxs("button",{type:"submit",className:"flex w-full items-center gap-2.5 px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})})]})]}),e.jsx("nav",{className:"md:hidden fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-40 safe-area-top",children:e.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[e.jsxs(i,{to:"/",className:`flex flex-col items-center justify-center flex-1 py-2 ${t("/")&&!t("/listings")&&!t("/messages")&&!t("/profile")&&!t("/my-listings")&&!t("/dashboard")?"text-brand-600":"text-gray-500"}`,children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t("/")&&!t("/listings")?2.5:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Home"})]}),e.jsxs(i,{to:"/listings",className:`flex flex-col items-center justify-center flex-1 py-2 ${t("/listings")&&!a.pathname.includes("/new")?"text-brand-600":"text-gray-500"}`,children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t("/listings")&&!a.pathname.includes("/new")?2.5:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Search"})]}),e.jsxs(i,{to:s?"/listings/new":"/login",className:`flex flex-col items-center justify-center flex-1 py-2 ${a.pathname==="/listings/new"?"text-accent-600":"text-gray-500"}`,children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:a.pathname==="/listings/new"?2.5:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"New"})]}),s?e.jsxs(i,{to:"/messages",className:`flex flex-col items-center justify-center flex-1 py-2 relative ${t("/messages")?"text-brand-600":"text-gray-500"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t("/messages")?2.5:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),c>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[9px] font-bold text-white",children:c>9?"9+":c})]}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Messages"})]}):e.jsxs(i,{to:"/login",className:"flex flex-col items-center justify-center flex-1 py-2 text-gray-500",children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Messages"})]}),s?e.jsxs("button",{onClick:()=>o(!0),className:`flex flex-col items-center justify-center flex-1 py-2 ${t("/profile")||t("/settings")||t("/saved")||t(m)?"text-brand-600":"text-gray-500"}`,children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t("/profile")||t("/settings")||t("/saved")?2.5:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium truncate max-w-[60px]",children:h})]}):e.jsxs(i,{to:"/login",className:"flex flex-col items-center justify-center flex-1 py-2 text-gray-500",children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Login"})]})]})})]})}const E=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Sora:wght@400;500;600;700&display=swap"}];function O({children:s}){return e.jsxs("html",{lang:"en",className:"h-full",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e.jsx(N,{}),e.jsx(w,{})]}),e.jsxs("body",{className:"h-full bg-gray-50 font-sans text-gray-900 antialiased",children:[s,e.jsx(L,{}),e.jsx(C,{})]})]})}const I=v(function(){const{user:a,ENV:n}=M();return e.jsxs(e.Fragment,{children:[e.jsx("script",{dangerouslySetInnerHTML:{__html:`window.ENV = ${JSON.stringify(n)}`}}),e.jsx(S,{}),e.jsx(z,{}),e.jsx(_,{user:a})]})});export{O as Layout,I as default,E as links};
