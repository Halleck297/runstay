import{c as u,j as t,L as b}from"./chunk-JZWAC4HX-CFbAysJh.js";function h(e){const o=new Date,r=new Date(e).getTime()-o.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s<=21&&s>=0}function f(e){return e?{single:"Single",double:"Double",double_single_use:"Double SU",twin:"Twin",twin_shared:"Twin Shared",triple:"Triple",quadruple:"Quad"}[e]||e:"Room"}function j({listing:e,isUserLoggedIn:o=!0,isSaved:c=!1}){const r=u(),s=r.formData?r.formData.get("action")==="save":c,i=new Date(e.event.event_date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),d=h(e.event.event_date),m=e.author.user_type==="tour_operator";let n="";if(e.listing_type==="bib")n=e.bib_count&&e.bib_count>1?`${e.bib_count} Bibs`:"Bib";else if(e.listing_type==="room"){const a=e.room_type?f(e.room_type):"Room";n=e.room_count&&e.room_count>1?`${e.room_count} ${a}s`:a}else n="Room + Bib";let l="";e.listing_type==="bib"?l="bg-purple-100 text-purple-700":e.listing_type==="room"?l="bg-blue-100 text-blue-700":l="bg-green-100 text-green-700";const x=m?"block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-brand-300 transition-all border-l-4 border-l-brand-500":"block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-brand-300 transition-all",p=(e.author.company_name||e.author.full_name||"Seller").split(" ")[0];return t.jsxs(b,{to:o?`/listings/${e.id}`:"/login",className:x,children:[t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold ${l}`,children:e.listing_type==="bib"?"Bib":e.listing_type==="room"?"Hotel":"Package"}),d&&t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-accent-100 text-accent-700",children:"LM"})]}),t.jsx("div",{className:"flex items-center gap-2",children:o&&t.jsxs(r.Form,{method:"post",action:"/api/saved",onClick:a=>a.stopPropagation(),children:[t.jsx("input",{type:"hidden",name:"listingId",value:e.id}),t.jsx("input",{type:"hidden",name:"action",value:s?"unsave":"save"}),t.jsx("button",{type:"submit",onClick:a=>a.preventDefault(),onMouseDown:a=>{a.preventDefault(),a.stopPropagation(),r.submit({listingId:e.id,action:s?"unsave":"save"},{method:"post",action:"/api/saved"})},className:`p-1 rounded-full transition-colors ${s?"text-red-500":"text-gray-400 hover:text-red-500"}`,title:s?"Remove from saved":"Save listing",children:t.jsx("svg",{className:"h-5 w-5",fill:s?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})})]}),t.jsx("h3",{className:"font-display text-base font-bold text-gray-900 leading-tight mb-0.5 line-clamp-1",children:e.event.name}),t.jsxs("p",{className:"text-sm font-medium text-brand-600 mb-2",children:[n,e.hotel_name&&` ‚Ä¢ ${e.hotel_name}`]}),t.jsx("div",{className:"flex items-center justify-between gap-3 pt-2 border-t border-gray-100",children:o?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[t.jsxs("span",{className:"text-xs text-gray-600 truncate",children:["üìç ",e.event.location," ‚Ä¢ üóì Race Day : ",i]}),t.jsx("span",{className:"text-xs text-gray-400",children:"‚Ä¢"}),t.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700 truncate",children:p}),e.author.user_type==="tour_operator"&&t.jsx("span",{className:"text-xs text-gray-500",children:"(TO)"}),e.author.is_verified&&t.jsx("svg",{className:"h-3 w-3 text-brand-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:e.listing_type==="bib"&&e.associated_costs?t.jsxs("p",{className:"text-base font-bold text-gray-900",children:["‚Ç¨",e.associated_costs.toLocaleString()]}):e.price?t.jsxs("p",{className:"text-base font-bold text-gray-900",children:["‚Ç¨",e.price.toLocaleString()]}):t.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Contact"})})]}):t.jsx("p",{className:"text-xs text-gray-500 italic w-full text-center",children:"Login to view details"})})]})}export{j as L};
