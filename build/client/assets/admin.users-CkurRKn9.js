import{w as u,u as y,a as j,f as g,j as e,L as x,F as s}from"./chunk-JZWAC4HX-Dlc7LzsC.js";const N=()=>[{title:"Users - Admin - Runoot"}],p={tour_operator:"Tour Operator",private:"Runner"},m={user:"bg-gray-100 text-gray-600",admin:"bg-purple-100 text-purple-700",superadmin:"bg-red-100 text-red-700"},b=u(function(){const{admin:n,users:l,totalCount:h,currentPage:i,totalPages:d}=y(),o=j(),[a]=g();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-2xl md:text-3xl font-bold text-gray-900",children:"Users"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:[h," total users"]})]}),e.jsxs(x,{to:"/admin/users/new",className:"btn-primary inline-flex items-center gap-2 self-start",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create User"]})]}),o&&"error"in o&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-alert-50 text-alert-700 text-sm",children:o.error}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:e.jsxs(s,{method:"get",className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",name:"search",placeholder:"Search by name, email, or company...",defaultValue:a.get("search")||"",className:"input w-full"})}),e.jsxs("select",{name:"type",defaultValue:a.get("type")||"",className:"input",children:[e.jsx("option",{value:"",children:"All types"}),e.jsx("option",{value:"private",children:"Runner"}),e.jsx("option",{value:"tour_operator",children:"Tour Operator"})]}),e.jsxs("select",{name:"role",defaultValue:a.get("role")||"",className:"input",children:[e.jsx("option",{value:"",children:"All roles"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"superadmin",children:"Superadmin"})]}),e.jsx("button",{type:"submit",className:"btn-accent",children:"Search"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-6 py-3",children:"User"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-6 py-3",children:"Type"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-6 py-3",children:"Role"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-6 py-3",children:"Verified"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-6 py-3",children:"Joined"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase tracking-wider px-6 py-3",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.full_name||"No name"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email}),t.company_name&&e.jsx("p",{className:"text-xs text-gray-400",children:t.company_name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:p[t.user_type]||t.user_type})}),e.jsx("td",{className:"px-6 py-4",children:n.role==="superadmin"?e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"changeRole"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsxs("select",{name:"newRole",defaultValue:t.role,onChange:r=>{var c;return(c=r.target.form)==null?void 0:c.requestSubmit()},className:`text-xs font-medium px-2 py-1 rounded-full border-0 cursor-pointer ${m[t.role]||""}`,children:[e.jsx("option",{value:"user",children:"user"}),e.jsx("option",{value:"admin",children:"admin"}),e.jsx("option",{value:"superadmin",children:"superadmin"})]})]}):e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${m[t.role]||""}`,children:t.role})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"verify"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("input",{type:"hidden",name:"currentStatus",value:t.is_verified.toString()}),e.jsx("button",{type:"submit",className:`text-sm font-medium ${t.is_verified?"text-brand-600 hover:text-brand-700":"text-gray-400 hover:text-gray-600"}`,children:t.is_verified?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]}):"Not verified"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"toggleTeamLeader"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("input",{type:"hidden",name:"currentStatus",value:(t.is_team_leader||!1).toString()}),e.jsxs("button",{type:"submit",className:`text-xs font-medium px-2 py-1 rounded transition-colors ${t.is_team_leader?"text-purple-700 bg-purple-50 hover:bg-purple-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:t.is_team_leader?"Remove Team Leader":"Make Team Leader",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),t.is_team_leader?"TL":"Set TL"]})]}),t.created_by_admin&&e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"impersonate"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsxs("button",{type:"submit",className:"text-xs font-medium text-navy-500 hover:text-navy-700 px-2 py-1 rounded hover:bg-gray-100 transition-colors",title:"Impersonate this user",children:[e.jsxs("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Impersonate"]})]}),n.role==="superadmin"&&t.id!==n.id&&e.jsxs(s,{method:"post",className:"inline",onSubmit:r=>{confirm(`Delete ${t.full_name||t.email}? This cannot be undone.`)||r.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_action",value:"deleteUser"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsxs("button",{type:"submit",className:"text-xs font-medium text-red-500 hover:text-red-700 px-2 py-1 rounded hover:bg-red-50 transition-colors",title:"Delete this user",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})]},t.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:l.map(t=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.full_name||"No name"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email}),t.company_name&&e.jsx("p",{className:"text-xs text-gray-400",children:t.company_name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[t.is_team_leader&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:"TL"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${m[t.role]||""}`,children:t.role})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:p[t.user_type]}),e.jsx("span",{children:"·"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()}),t.is_verified&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"·"}),e.jsx("span",{className:"text-brand-600",children:"Verified"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"verify"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("input",{type:"hidden",name:"currentStatus",value:t.is_verified.toString()}),e.jsx("button",{type:"submit",className:"text-xs text-gray-500 hover:text-gray-700 px-2 py-1 rounded bg-gray-50",children:t.is_verified?"Unverify":"Verify"})]}),e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"toggleTeamLeader"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("input",{type:"hidden",name:"currentStatus",value:(t.is_team_leader||!1).toString()}),e.jsx("button",{type:"submit",className:`text-xs px-2 py-1 rounded ${t.is_team_leader?"text-purple-700 bg-purple-50":"text-gray-500 bg-gray-50"}`,children:t.is_team_leader?"Remove TL":"Set TL"})]}),t.created_by_admin&&e.jsxs(s,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"impersonate"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("button",{type:"submit",className:"text-xs text-navy-500 hover:text-navy-700 px-2 py-1 rounded bg-gray-50",children:"Impersonate"})]}),n.role==="superadmin"&&t.id!==n.id&&e.jsxs(s,{method:"post",className:"inline",onSubmit:r=>{confirm(`Delete ${t.full_name||t.email}?`)||r.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_action",value:"deleteUser"}),e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("button",{type:"submit",className:"text-xs text-red-500 hover:text-red-700 px-2 py-1 rounded bg-red-50",children:"Delete"})]})]})]})]},t.id))}),l.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-400 text-sm",children:"No users found"})]}),d>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[i>1&&e.jsx(x,{to:`/admin/users?page=${i-1}&search=${a.get("search")||""}&type=${a.get("type")||""}&role=${a.get("role")||""}`,className:"px-3 py-2 text-sm rounded-lg border border-gray-200 hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",i," of ",d]}),i<d&&e.jsx(x,{to:`/admin/users?page=${i+1}&search=${a.get("search")||""}&type=${a.get("type")||""}&role=${a.get("role")||""}`,className:"px-3 py-2 text-sm rounded-lg border border-gray-200 hover:bg-gray-50",children:"Next"})]})]})});export{b as default,N as meta};
