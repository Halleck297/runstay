import{r as d,j as e,L as M}from"./chunk-JZWAC4HX-Wpy6LLBq.js";function R({events:n,onSelectEvent:r,defaultEventId:i}){const[l,c]=d.useState(!1),[t,x]=d.useState(""),[o,p]=d.useState(()=>i&&n.find(a=>a.id===i)||null),u=n.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.country.toLowerCase().includes(t.toLowerCase())),m=a=>{p(a),c(!1),r(a.id)};return e.jsxs("div",{children:[e.jsx("input",{type:"hidden",name:"eventId",value:(o==null?void 0:o.id)||""}),o?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-accent-500 bg-accent-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-accent-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Event: ",o.name]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[o.country," â€¢ ",new Date(o.event_date).getFullYear()]})]})]}),e.jsx("button",{type:"button",onClick:()=>c(!0),className:"text-sm text-brand-600 hover:text-brand-700 font-medium",children:"Change"})]}):e.jsx("button",{type:"button",onClick:()=>c(!0),className:"input text-left text-gray-500 hover:border-brand-500",children:"Choose your event..."}),l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:()=>c(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl rounded-lg bg-white shadow-xl",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Choose your event"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("input",{type:"text",placeholder:"Search by event name or country...",value:t,onChange:a=>x(a.target.value),className:"input",autoFocus:!0})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto px-6 py-4",children:u.length>0?e.jsx("div",{className:"space-y-2",children:u.map(a=>e.jsxs("button",{type:"button",onClick:()=>m(a),className:"w-full rounded-lg border border-gray-200 p-4 text-left transition-colors hover:border-brand-500 hover:bg-brand-50",children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.country," â€¢ ",new Date(a.event_date).getFullYear()]})]},a.id))}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Can't find your event?"}),e.jsx(M,{to:"/contact",className:"mt-3 inline-block px-4 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg transition-colors",children:"Contact us"})]})})]})]})})]})}function A({onSelectHotel:n,apiKey:r,eventCity:i,eventCountry:l,defaultHotelName:c}){const[t,x]=d.useState(()=>c?{placeId:"",name:c,city:"",country:"",formattedAddress:""}:null),[o,p]=d.useState(!1),u=d.useRef(null),m=d.useRef(null);d.useEffect(()=>{if(!u.current||!r)return;const g=async()=>{if(window.google)h();else{const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${r}&libraries=places`,s.async=!0,s.defer=!0,document.head.appendChild(s),s.onload=()=>{h()}}},h=()=>{if(u.current){if(m.current=new google.maps.places.Autocomplete(u.current,{types:["lodging"],fields:["place_id","name","formatted_address","address_components","geometry","rating","website"]}),i&&l){const s=I(l);s&&m.current.setComponentRestrictions({country:s})}m.current.addListener("place_changed",()=>{var N,w,C,k,L,S;const s=(N=m.current)==null?void 0:N.getPlace();if(!s||!s.place_id)return;let j="",b="";(w=s.address_components)==null||w.forEach(y=>{y.types.includes("locality")&&(j=y.long_name),y.types.includes("country")&&(b=y.long_name)});const v={placeId:s.place_id,name:s.name||"",city:j,country:b,formattedAddress:s.formatted_address||"",lat:(k=(C=s.geometry)==null?void 0:C.location)==null?void 0:k.lat(),lng:(S=(L=s.geometry)==null?void 0:L.location)==null?void 0:S.lng(),rating:s.rating,website:s.website};x(v),n(v)})}};g()},[r,n]);const a=()=>{x(null),n(null)},_=g=>{g.preventDefault();const h=new FormData(g.currentTarget),s={placeId:"",name:h.get("manualHotelName"),city:h.get("manualCity"),country:h.get("manualCountry"),formattedAddress:""};x(s),n(s),p(!1)};return e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500 bg-green-50 p-4",children:[e.jsx("input",{type:"hidden",name:"hotelPlaceId",value:(t==null?void 0:t.placeId)||""}),e.jsx("input",{type:"hidden",name:"hotelName",value:(t==null?void 0:t.name)||""}),e.jsx("input",{type:"hidden",name:"hotelCity",value:(t==null?void 0:t.city)||""}),e.jsx("input",{type:"hidden",name:"hotelCountry",value:(t==null?void 0:t.country)||""}),e.jsx("input",{type:"hidden",name:"hotelLat",value:(t==null?void 0:t.lat)||""}),e.jsx("input",{type:"hidden",name:"hotelLng",value:(t==null?void 0:t.lng)||""}),e.jsx("input",{type:"hidden",name:"hotelRating",value:(t==null?void 0:t.rating)||""}),e.jsx("input",{type:"hidden",name:"hotelWebsite",value:(t==null?void 0:t.website)||""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Hotel: ",t.name]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t.city,t.country?`, ${t.country}`:"",t.rating&&` â€¢ â­ ${t.rating}`,t.website&&" â€¢ ðŸŒ Website available"]})]})]}),e.jsx("button",{type:"button",onClick:a,className:"text-sm text-brand-600 hover:text-brand-700 font-medium",children:"Change"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"hidden",name:"hotelPlaceId",value:""}),e.jsx("input",{type:"hidden",name:"hotelName",value:""}),e.jsx("input",{type:"hidden",name:"hotelCity",value:""}),e.jsx("input",{type:"hidden",name:"hotelCountry",value:""}),e.jsx("input",{type:"hidden",name:"hotelLat",value:""}),e.jsx("input",{type:"hidden",name:"hotelLng",value:""}),e.jsx("input",{type:"hidden",name:"hotelRating",value:""}),e.jsx("input",{type:"hidden",name:"hotelWebsite",value:""}),e.jsx("input",{ref:u,type:"text",placeholder:"Start typing hotel name or city...",className:"input",onChange:a}),e.jsx("button",{type:"button",onClick:()=>p(!o),className:"mt-2 inline-flex items-center gap-2 rounded-md bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-[0_2px_8px_rgba(0,0,0,0.15)] hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Use autocomplete instead"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add hotel manually"]})}),o&&e.jsxs("form",{onSubmit:_,className:"mt-4 space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"manualHotelName",className:"label text-sm",children:"Hotel name *"}),e.jsx("input",{type:"text",id:"manualHotelName",name:"manualHotelName",required:!0,className:"input",placeholder:"e.g. Hotel Artemide"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"manualCity",className:"label text-sm",children:"City *"}),e.jsx("input",{type:"text",id:"manualCity",name:"manualCity",required:!0,className:"input",placeholder:"e.g. Rome"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"manualCountry",className:"label text-sm",children:"Country *"}),e.jsx("input",{type:"text",id:"manualCountry",name:"manualCountry",required:!0,className:"input",placeholder:"e.g. Italy"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn-primary text-sm",children:"Save hotel"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"text-sm text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})]})})}function I(n){return{Italy:"IT",Germany:"DE",USA:"US","United States":"US",UK:"GB","United Kingdom":"GB",France:"FR",Spain:"ES",Japan:"JP",Netherlands:"NL"}[n]||""}const f={private:{maxRooms:1,maxBibs:1,allowedTransferMethods:["official_process"],description:"Exchange platform for individual runners"},tour_operator:{maxRooms:null,maxBibs:null,allowedTransferMethods:["official_process","package"],description:"Business platform for tour operators"}};function E(n,r){return r==="rooms"?f[n].maxRooms:f[n].maxBibs}function B(n){const r=f[n].allowedTransferMethods,i={official_process:"Official organizer name change",package:"Included in travel package",contact:"Contact for details"};return r.map(l=>({value:l,label:i[l]}))}function P(n,r,i){return r?r==="official_process"?{showAssociatedCosts:i==="bib"&&n==="private",showCostNotes:!1,showPackageInfo:!1}:r==="package"?{showAssociatedCosts:!1,showCostNotes:!1,showPackageInfo:!0}:{showAssociatedCosts:!1,showCostNotes:!1,showPackageInfo:!1}:{showAssociatedCosts:!1,showCostNotes:!1,showPackageInfo:!1}}export{R as E,A as H,B as a,P as b,E as g};
