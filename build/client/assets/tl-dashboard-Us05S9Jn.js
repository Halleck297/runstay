import{w as y,u as j,a as f,r as N,j as e,F as h}from"./chunk-JZWAC4HX-Dlc7LzsC.js";const C=()=>[{title:"Team Leader Dashboard - Runoot"}],v={tour_operator:"Tour Operator",private:"Runner"},L=y(function(){const{user:r,referrals:l,referredUsers:p,stats:n,weeklyData:d}=j(),t=f(),[u,i]=N.useState(!1),o=`${typeof window<"u"?window.location.origin:""}/join/${r.referral_code}`,g=()=>{navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)},b=Math.max(...d.map(a=>a.value),1);return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-2xl md:text-3xl font-bold text-gray-900",children:"Team Leader Dashboard"}),e.jsx("p",{className:"text-gray-500",children:"Manage your referral community"})]})]})}),t&&"error"in t&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-alert-50 text-alert-700 text-sm",children:t.error}),t&&"message"in t&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-success-50 text-success-700 text-sm",children:t.message}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Referrals"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:n.totalReferrals})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-brand-600 mt-1",children:n.activeReferrals})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm mb-6",children:[e.jsx("h2",{className:"font-display font-semibold text-gray-900 mb-4",children:"Weekly Signups"}),e.jsx("div",{className:"flex items-end gap-3 h-32",children:d.map((a,s)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:a.value}),e.jsx("div",{className:"w-full bg-brand-500 rounded-t-md transition-all duration-500",style:{height:`${Math.max(a.value/b*100,4)}%`,minHeight:"4px"}}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:a.label})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm mb-6",children:[e.jsx("h2",{className:"font-display font-semibold text-gray-900 mb-2",children:"Your Referral Link"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Share this link with people you want to invite to Runoot."}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg px-4 py-2.5 font-mono text-sm text-gray-700 border border-gray-200 truncate",children:o}),e.jsx("button",{onClick:g,className:"btn-primary text-sm px-4 py-2.5 flex-shrink-0",children:u?"Copied!":"Copy"})]}),e.jsxs(h,{method:"post",className:"flex items-end gap-3",children:[e.jsx("input",{type:"hidden",name:"_action",value:"updateCode"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"referralCode",className:"label",children:"Custom Code"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm text-gray-400 mr-1",children:"/join/"}),e.jsx("input",{type:"text",id:"referralCode",name:"referralCode",defaultValue:r.referral_code||"",placeholder:"MYCODE2026",className:"input flex-1 uppercase",maxLength:20})]})]}),e.jsx("button",{type:"submit",className:"btn-secondary text-sm px-4 py-2",children:"Save Code"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm mb-6",children:[e.jsx("h2",{className:"font-display font-semibold text-gray-900 mb-2",children:"Welcome Message"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This message will appear on your referral page when someone opens your link."}),e.jsxs(h,{method:"post",children:[e.jsx("input",{type:"hidden",name:"_action",value:"updateWelcome"}),e.jsx("textarea",{name:"welcomeMessage",rows:3,defaultValue:r.tl_welcome_message||"",placeholder:"Welcome to our running community! I'm excited to have you join us on Runoot...",className:"input w-full mb-3",maxLength:500}),e.jsx("button",{type:"submit",className:"btn-secondary text-sm",children:"Save Message"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:e.jsx("h2",{className:"font-display font-semibold text-gray-900",children:"Your Referrals"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:l.length>0?l.map(a=>{var c,x,m;const s=p[a.referred_user_id];return e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-brand-100 flex items-center justify-center text-brand-700 font-semibold flex-shrink-0 text-sm",children:((c=s==null?void 0:s.full_name)==null?void 0:c.charAt(0))||((m=(x=s==null?void 0:s.email)==null?void 0:x.charAt(0))==null?void 0:m.toUpperCase())||"?"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(s==null?void 0:s.full_name)||(s==null?void 0:s.email)||"Unknown user"}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s?v[s.user_type]||s.user_type:""}),e.jsx("span",{className:"text-xs text-gray-300",children:"Â·"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleDateString()})]})]})]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ${a.status==="active"?"bg-success-100 text-success-700":"bg-gray-100 text-gray-600"}`,children:a.status})]},a.id)}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No referrals yet"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Share your referral link to start growing your community!"})]})})]})]})});export{L as default,C as meta};
