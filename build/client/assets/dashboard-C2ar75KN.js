import{w as N,u as f,j as e,L as t}from"./chunk-JZWAC4HX-Dc7zMzt7.js";import{H as y}from"./Header-CdtJeiXT.js";import{L as p}from"./ListingCardCompact-BxkEj8iT.js";const M=()=>[{title:"Dashboard - Runoot"}],u={active:"bg-success-100 text-success-700 border border-success-200",sold:"bg-gray-100 text-gray-700 border border-gray-200",expired:"bg-alert-100 text-alert-700 border border-alert-200"},C=N(function(){var j;const{user:a,listings:r,conversations:l,unreadCount:n}=f(),h=r.filter(s=>s.status==="active"),g=r.filter(s=>s.status==="sold");return e.jsx("div",{className:"min-h-screen bg-gray-100 md:bg-[url('/savedBG.png')] md:bg-cover md:bg-center md:bg-fixed",children:e.jsxs("div",{className:"min-h-screen md:bg-gray-50/85",children:[e.jsx(y,{user:a}),e.jsxs("main",{className:"md:hidden px-4 pt-20 pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h1",{className:"font-display text-lg font-bold text-gray-900",children:"Dashboard"}),e.jsxs(t,{to:"/listings/new",className:"bg-accent-500 text-white rounded-lg px-3 py-1.5 flex items-center gap-1.5 text-xs font-medium shadow-sm active:bg-accent-600",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Listing"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-brand-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-success-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-success-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sold"})]})]})}),e.jsx(t,{to:"/messages",className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 active:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Chats"})]})]})}),e.jsx(t,{to:"/messages",className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 active:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${n>0?"bg-accent-100":"bg-gray-100"}`,children:e.jsx("svg",{className:`w-5 h-5 ${n>0?"text-accent-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-2xl font-bold ${n>0?"text-accent-600":"text-gray-900"}`,children:n}),e.jsx("p",{className:"text-xs text-gray-500",children:"Unread"})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-display font-semibold text-gray-900",children:"My Listings"}),r.length>3&&e.jsx(t,{to:"/my-listings",className:"text-sm text-brand-600 font-medium",children:"See all"})]}),r.length>0?e.jsx("div",{className:"space-y-3",children:r.slice(0,3).map(s=>e.jsxs("div",{className:"relative",children:[e.jsx(p,{listing:s,isUserLoggedIn:!0}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${u[s.status]}`,children:s.status})})]},s.id))}):e.jsxs("div",{className:"bg-white rounded-xl p-6 text-center border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No listings yet"}),e.jsx(t,{to:"/listings/new",className:"text-brand-600 text-sm font-medium mt-2 inline-block",children:"Create your first listing →"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-display font-semibold text-gray-900",children:"Recent Messages"}),l.length>0&&e.jsx(t,{to:"/messages",className:"text-sm text-brand-600 font-medium",children:"See all"})]}),l.length>0?e.jsx("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-100",children:l.slice(0,3).map((s,m)=>{var c,x,o;const d=(c=s.messages)==null?void 0:c[s.messages.length-1],i=(x=s.messages)==null?void 0:x.some(b=>b.sender_id!==a.id&&!b.read_at);return e.jsxs(t,{to:`/messages/${s.id}`,className:`flex items-center gap-3 p-4 active:bg-gray-50 ${m>0?"border-t border-gray-100":""}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${i?"bg-brand-100":"bg-gray-100"}`,children:e.jsx("svg",{className:`w-5 h-5 ${i?"text-brand-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm truncate ${i?"font-semibold text-gray-900":"text-gray-700"}`,children:((o=s.listing)==null?void 0:o.title)||"Conversation"}),d&&e.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:d.content})]}),i&&e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-brand-500 flex-shrink-0"})]},s.id)})}):e.jsxs("div",{className:"bg-white rounded-xl p-6 text-center border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No conversations yet"}),e.jsx(t,{to:"/listings",className:"text-brand-600 text-sm font-medium mt-2 inline-block",children:"Browse listings →"})]})]})]}),e.jsxs("main",{className:"hidden md:block mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 bg-white/70 backdrop-blur-sm rounded-xl shadow-md p-6",children:[e.jsxs("h1",{className:"font-display text-3xl font-bold text-gray-900",children:["Welcome back, ",a.full_name||a.email.split("@")[0]]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your listings and conversations"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Listings"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:h.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sold"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:g.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Conversations"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:l.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Unread Messages"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-brand-600",children:n})]})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"font-display text-lg font-semibold text-gray-900",children:"My Listings"}),e.jsx(t,{to:"/listings/new",className:"text-sm font-medium text-brand-600 hover:text-brand-700",children:"+ New Listing"})]}),r.length>0?e.jsx("div",{className:"p-4 space-y-3",children:r.slice(0,5).map(s=>e.jsxs("div",{className:"relative",children:[e.jsx(p,{listing:s,isUserLoggedIn:!0}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold shadow-sm ${u[s.status]}`,children:s.status})})]},s.id))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No listings yet"}),e.jsx(t,{to:"/listings/new",className:"mt-4 inline-block text-brand-600 hover:text-brand-700 font-medium",children:"Create your first listing →"})]}),r.length>5&&e.jsx("div",{className:"p-4 border-t border-gray-100",children:e.jsxs(t,{to:"/my-listings",className:"text-sm text-gray-600 hover:text-gray-900",children:["View all ",r.length," listings →"]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"font-display text-lg font-semibold text-gray-900",children:"Recent Messages"}),e.jsx(t,{to:"/messages",className:"text-sm font-medium text-brand-600 hover:text-brand-700",children:"View All"})]}),l.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:l.map(s=>{var i,c,x;const m=(i=s.messages)==null?void 0:i[s.messages.length-1],d=(c=s.messages)==null?void 0:c.some(o=>o.sender_id!==a.id&&!o.read_at);return e.jsx(t,{to:`/messages/${s.id}`,className:"block p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`font-medium truncate ${d?"text-gray-900":"text-gray-600"}`,children:((x=s.listing)==null?void 0:x.title)||"Conversation"}),m&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate",children:m.content})]}),d&&e.jsx("span",{className:"ml-4 h-2.5 w-2.5 rounded-full bg-brand-500"})]})},s.id)})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start by browsing listings"})]})]})]}),e.jsx("div",{className:"mt-8 card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold text-2xl",children:((j=a.full_name)==null?void 0:j.charAt(0))||a.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-lg",children:a.full_name||a.email}),e.jsx("p",{className:"text-gray-500",children:a.user_type==="tour_operator"?a.company_name||"Tour Operator":"Private Runner"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.is_verified?e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-brand-600",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Not verified"})})]})]}),e.jsx(t,{to:"/profile",className:"btn-secondary",children:"Edit Profile"})]})})]})]})})});export{C as default,M as meta};
