import{w as _,u as L,a as C,r as T,d as M,j as e,L as d,F as g}from"./chunk-JZWAC4HX-Wpy6LLBq.js";import{H as D}from"./Header-DbNBnIdE.js";const $=({data:t})=>{var a;return[{title:((a=t==null?void 0:t.listing)==null?void 0:a.title)||"Listing - Runoot"}]},S={room:"Room only",bib:"Bib only",room_and_bib:"Package"},R={room:"bg-blue-100 text-blue-700 border-blue-200",bib:"bg-purple-100 text-purple-700 border-purple-200",room_and_bib:"bg-green-100 text-green-700 border-green-200"};function v(t){return t?{single:"Single",double:"Double",double_single_use:"Double Single Use",twin:"Twin",twin_shared:"Twin Shared",triple:"Triple",quadruple:"Quadruple"}[t]||t:"Room"}function z(t){const a=new Date,m=new Date(t).getTime()-a.getTime();return Math.ceil(m/(1e3*60*60*24))}function B(t){return t.slug?t.slug:t.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}const W=_(function(){var b,y;const{user:a,listing:u,isSaved:m}=L(),i=C(),[x,N]=T.useState(!1),h=M(),o=h.formData?h.formData.get("action")==="save":m,s=u,p=a,j=new Date(s.event.event_date),w=j.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"});j.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});const c=(p==null?void 0:p.id)===s.author_id,f=z(s.event.event_date);if(s.listing_type==="room"){const l=s.check_in&&s.check_out?Math.ceil((new Date(s.check_out).getTime()-new Date(s.check_in).getTime())/864e5):0;`${v(s.room_type)}`,l>0&&`${l}`}else s.listing_type==="bib"&&(`${s.bib_count||1}`,(s.bib_count||1)>1);const k=s.hotel_stars?`Comparable ${s.hotel_stars}-star hotels from â‚¬${Math.round(s.hotel_stars*80+100)}`:"Comparable hotels from â‚¬200+";return e.jsxs("div",{className:"min-h-full bg-gray-50",children:[e.jsx(D,{user:a}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs(d,{to:"/listings",className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to listings"]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-lg",children:[e.jsx("img",{src:`/events/${B(s.event)}.jpg`,alt:s.event.name,className:"w-full aspect-video object-cover",onError:l=>{const r=l.target;r.style.display="none";const n=r.nextElementSibling;n&&(n.style.display="flex")}}),e.jsx("div",{className:"w-full aspect-video bg-gradient-to-br from-brand-100 to-brand-200 items-center justify-center",style:{display:"none"},children:e.jsx("svg",{className:"h-16 w-16 text-brand-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(s.listing_type==="room"||s.listing_type==="room_and_bib")&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-display text-lg font-semibold text-gray-900 mb-4",children:"Hotel & Location"}),e.jsxs("div",{className:"space-y-5",children:[s.hotel_name&&e.jsx("div",{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100 text-blue-700 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Hotel"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.hotel_website?e.jsxs("a",{href:s.hotel_website,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:text-brand-700 hover:underline inline-flex items-center gap-1",children:[s.hotel_name,e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):s.hotel_name}),(s.hotel_city||s.hotel_country)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:["ðŸ“ ",s.hotel_city||"",s.hotel_city&&s.hotel_country?", ":"",s.hotel_country||""]}),s.hotel_rating&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["â­ ",s.hotel_rating.toFixed(1)," rating"]})]})]})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100 text-gray-600 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Accommodation"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.room_count||1," ",v(s.room_type)," room",(s.room_count||1)>1?"s":""]})]})]}),s.check_in&&s.check_out&&(()=>{const l=new Date(s.check_in),r=new Date(s.check_out),n=Math.ceil((r.getTime()-l.getTime())/(1e3*60*60*24));return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100 text-gray-600 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Dates"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[l.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," â†’ ",r.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:[n," night",n>1?"s":""]})]})]})})()]})]}),(s.listing_type==="room"||s.listing_type==="room_and_bib")&&s.hotel_name&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-display text-lg font-semibold text-gray-900 mb-4",children:"Why this stay"}),e.jsxs("div",{className:"space-y-2.5",children:[s.hotel_rating&&s.hotel_rating>=4&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:["Top-rated hotel (â­ ",s.hotel_rating.toFixed(1)," on Google)"]})]}),s.hotel_city&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:["Located in ",s.hotel_city]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Perfect for race weekend rest & recovery"})]})]})]}),(s.listing_type==="bib"||s.listing_type==="room_and_bib")&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-display text-lg font-semibold text-gray-900 mb-4",children:"Bib Transfer Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-100 text-purple-700 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Available bibs"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.bib_count||1," bib",(s.bib_count||1)>1?"s":""]})]})]}),s.transfer_type&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Transfer method"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[s.transfer_type==="official_process"&&"âœ“ Official organizer name change process",s.transfer_type==="package"&&"âœ“ Included in complete race package",s.transfer_type==="contact"&&"Contact seller for transfer details"]})]})]})]}),s.description&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-display text-lg font-semibold text-gray-900 mb-3",children:"Additional Information"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-display text-lg font-semibold text-gray-900 mb-4",children:"How to Complete This Transaction"}),s.listing_type==="room"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Follow these steps after agreeing with the seller:"}),e.jsxs("ol",{className:"space-y-3",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-brand-100 text-brand-700 text-sm font-semibold flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Confirm booking details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Verify check-in/out dates, room type, and hotel name with the seller."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-brand-100 text-brand-700 text-sm font-semibold flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Arrange name change"}),e.jsx("p",{className:"text-sm text-gray-600",children:"The seller will contact the hotel to transfer the reservation to your name. Some hotels may charge a fee."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-brand-100 text-brand-700 text-sm font-semibold flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Get written confirmation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Request the updated booking confirmation directly from the hotel with your name."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-brand-100 text-brand-700 text-sm font-semibold flex-shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Complete payment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay the seller only after receiving the hotel confirmation. Use PayPal or bank transfer for safety."})]})]})]})]}),s.listing_type==="bib"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Follow these steps after agreeing with the seller:"}),e.jsxs("ol",{className:"space-y-3",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-100 text-purple-700 text-sm font-semibold flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Check race transfer policy"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Visit the official race website to verify if bib transfers are allowed and the deadline."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-100 text-purple-700 text-sm font-semibold flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Initiate official transfer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"The seller must start the name change process through the race organizer's system. You may need to provide your details."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-100 text-purple-700 text-sm font-semibold flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Receive confirmation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Wait for official confirmation from the race organizer that the bib is now registered in your name."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-100 text-purple-700 text-sm font-semibold flex-shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Complete payment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay the seller only after the transfer is confirmed. Use PayPal or bank transfer for safety."})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("span",{className:"font-medium",children:"Important:"})," Never run with someone else's bib without an official transfer. This violates race rules and insurance coverage."]})})]}),s.listing_type==="room_and_bib"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"This is a complete package. Follow these steps after agreeing with the seller:"}),e.jsxs("ol",{className:"space-y-3",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-green-100 text-green-700 text-sm font-semibold flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Verify package contents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Confirm exactly what's included: hotel dates, room type, race bib, and any extras."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-green-100 text-green-700 text-sm font-semibold flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Start bib transfer first"}),e.jsx("p",{className:"text-sm text-gray-600",children:"The race bib transfer often has strict deadlines. The seller should initiate this through the official organizer."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-green-100 text-green-700 text-sm font-semibold flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Transfer hotel booking"}),e.jsx("p",{className:"text-sm text-gray-600",children:"The seller contacts the hotel to change the reservation name. Request confirmation directly from the hotel."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-green-100 text-green-700 text-sm font-semibold flex-shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Get all confirmations"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Collect written confirmation for both the race entry and hotel booking in your name."})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-green-100 text-green-700 text-sm font-semibold flex-shrink-0",children:"5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Complete payment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay only after receiving all confirmations. Use PayPal or bank transfer for safety."})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Tip:"})," For packages, consider splitting the payment â€” partial after bib confirmation, remainder after hotel confirmation."]})})]})]})]}),e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 flex items-center justify-between border-b border-gray-100",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold border ${R[s.listing_type]}`,children:S[s.listing_type]}),e.jsxs("div",{className:"flex items-center gap-3",children:[a&&!c&&s.status==="active"&&e.jsxs(h.Form,{method:"post",action:"/api/saved",children:[e.jsx("input",{type:"hidden",name:"listingId",value:s.id}),e.jsx("input",{type:"hidden",name:"action",value:o?"unsave":"save"}),e.jsx("button",{type:"submit",className:`p-2 rounded-full transition-colors ${o?"text-red-500 bg-red-50 hover:bg-red-100":"text-gray-400 bg-gray-100 hover:bg-gray-200 hover:text-gray-600"}`,title:o?"Remove from saved":"Save listing",children:e.jsx("svg",{className:"h-5 w-5",fill:o?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),s.status!=="active"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600",children:s.status==="sold"?"Sold":"Expired"})]})]}),e.jsx("div",{className:"p-5 bg-gradient-to-br from-brand-50 to-blue-50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-brand-500 text-white flex-shrink-0",children:e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"font-display text-lg font-bold text-gray-900",children:s.event.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Race day:"})," ",w]}),f>0&&f<=60&&e.jsxs("span",{className:"inline-block mt-3 px-2.5 py-1 text-xs font-medium text-accent-600 bg-accent-50 border border-accent-300 rounded-full",children:[f," days until race"]})]})]})}),e.jsx("div",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-semibold flex-shrink-0",children:((b=s.author.company_name)==null?void 0:b.charAt(0))||((y=s.author.full_name)==null?void 0:y.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate text-sm",children:s.author.company_name||s.author.full_name}),s.author.is_verified&&e.jsx("svg",{className:"h-4 w-4 text-brand-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.author.user_type==="tour_operator"?"Tour Operator":"Private Seller",s.author.is_verified&&" Â· Verified"]})]})]})}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"text-center pb-4",children:s.listing_type==="bib"||s.listing_type==="room_and_bib"?s.associated_costs?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Associated costs"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["â‚¬",s.associated_costs.toLocaleString()]}),s.cost_notes&&e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s.cost_notes})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-semibold text-gray-600 mb-1",children:"Contact for price"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Price details available from seller"})]}):s.price?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["â‚¬",s.price.toLocaleString()]}),s.price_negotiable&&e.jsx("p",{className:"mt-1 text-sm text-green-600 font-medium",children:"Price negotiable"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-semibold text-gray-600 mb-1",children:"Contact for price"}),e.jsx("p",{className:"text-xs text-gray-500",children:k})]})}),(i==null?void 0:i.error)&&e.jsx("div",{className:"rounded-lg bg-red-50 p-3 text-sm text-red-700 mb-4",children:i.error}),s.status==="active"&&!c&&e.jsx(g,{method:"post",children:e.jsx("button",{type:"submit",className:"btn-primary w-full text-base py-3 font-semibold",children:"Request price & availability"})}),c&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{to:`/listings/${s.id}/edit`,className:"btn-secondary w-full",children:"Edit Listing"}),e.jsxs(g,{method:"post",onSubmit:l=>{confirm("Are you sure you want to delete this listing? This action cannot be undone.")||l.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_action",value:"delete"}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 hover:text-red-700 transition-colors",children:"Delete Listing"})]})]}),!a&&s.status==="active"&&e.jsx(d,{to:`/login?redirectTo=/listings/${s.id}`,className:"btn-primary w-full",children:"Login to Contact"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>N(!x),className:"w-full p-4 flex items-center justify-between text-left hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"Safety & Payments"})]}),e.jsx("svg",{className:`h-5 w-5 text-gray-400 transition-transform ${x?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsxs("div",{className:"px-4 pb-4",children:[e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 mt-3",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-brand-500 flex-shrink-0",children:"â€¢"}),e.jsx("span",{children:"Always verify seller identity before payment"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-brand-500 flex-shrink-0",children:"â€¢"}),e.jsx("span",{children:"Use secure payment methods (PayPal, bank transfer)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-brand-500 flex-shrink-0",children:"â€¢"}),e.jsx("span",{children:"Get written confirmation of all details"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-brand-500 flex-shrink-0",children:"â€¢"}),e.jsx("span",{children:"Report suspicious activity immediately"})]})]}),e.jsx(d,{to:"/safety",className:"mt-3 inline-block text-sm text-brand-600 hover:text-brand-700 font-medium",children:"Read full safety guidelines â†’"})]})]})]})]}),s.status==="active"&&!c&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-200 shadow-lg lg:hidden z-10",children:e.jsx(g,{method:"post",children:e.jsx("button",{type:"submit",className:"btn-primary w-full text-base py-3 font-semibold",children:"Request price & availability"})})})]})]})});export{W as default,$ as meta};
