import{w as j,u as N,j as e,L as r}from"./chunk-JZWAC4HX-Wpy6LLBq.js";import{H as b}from"./Header-DbNBnIdE.js";import{L as f}from"./ListingCardCompact-Bf9JPoRI.js";const C=()=>[{title:"Dashboard - Runoot"}],u={active:"bg-success-100 text-success-700 border border-success-200",sold:"bg-gray-100 text-gray-700 border border-gray-200",expired:"bg-alert-100 text-alert-700 border border-alert-200"},_=j(function(){var i;const{user:t,listings:a,conversations:l,unreadCount:g}=N(),h=a.filter(s=>s.status==="active"),p=a.filter(s=>s.status==="sold");return e.jsxs("div",{className:"min-h-full bg-gray-50",children:[e.jsx(b,{user:t}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"font-display text-3xl font-bold text-gray-900",children:["Welcome back, ",t.full_name||t.email.split("@")[0]]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your listings and conversations"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Listings"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:h.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sold"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:p.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Conversations"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:l.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Unread Messages"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-brand-600",children:g})]})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"font-display text-lg font-semibold text-gray-900",children:"My Listings"}),e.jsx(r,{to:"/listings/new",className:"text-sm font-medium text-brand-600 hover:text-brand-700",children:"+ New Listing"})]}),a.length>0?e.jsx("div",{className:"p-4 space-y-3",children:a.slice(0,5).map(s=>e.jsxs("div",{className:"relative",children:[e.jsx(f,{listing:s,isUserLoggedIn:!0}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold shadow-sm ${u[s.status]}`,children:s.status})})]},s.id))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No listings yet"}),e.jsx(r,{to:"/listings/new",className:"mt-4 inline-block text-brand-600 hover:text-brand-700 font-medium",children:"Create your first listing →"})]}),a.length>5&&e.jsx("div",{className:"p-4 border-t border-gray-100",children:e.jsxs(r,{to:"/dashboard/listings",className:"text-sm text-gray-600 hover:text-gray-900",children:["View all ",a.length," listings →"]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"font-display text-lg font-semibold text-gray-900",children:"Recent Messages"}),e.jsx(r,{to:"/messages",className:"text-sm font-medium text-brand-600 hover:text-brand-700",children:"View All"})]}),l.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:l.map(s=>{var c,x,m;const n=(c=s.messages)==null?void 0:c[s.messages.length-1],d=(x=s.messages)==null?void 0:x.some(o=>o.sender_id!==t.id&&!o.read_at);return e.jsx(r,{to:`/messages/${s.id}`,className:"block p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`font-medium truncate ${d?"text-gray-900":"text-gray-600"}`,children:((m=s.listing)==null?void 0:m.title)||"Conversation"}),n&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate",children:n.content})]}),d&&e.jsx("span",{className:"ml-4 h-2.5 w-2.5 rounded-full bg-brand-500"})]})},s.id)})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start by browsing listings"})]})]})]}),e.jsx("div",{className:"mt-8 card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold text-2xl",children:((i=t.full_name)==null?void 0:i.charAt(0))||t.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-lg",children:t.full_name||t.email}),e.jsx("p",{className:"text-gray-500",children:t.user_type==="tour_operator"?t.company_name||"Tour Operator":"Private Runner"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.is_verified?e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-brand-600",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Not verified"})})]})]}),e.jsx(r,{to:"/profile",className:"btn-secondary",children:"Edit Profile"})]})})]})]})});export{_ as default,C as meta};
