import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{u as k,a as C,r as l,F as _}from"./components-Oo-HIKtb.js";import{H as T}from"./Header-BVlwBq23.js";import{g as b,a as S,b as F,E as D,H as L}from"./listing-rules-x2O8E4dI.js";const P=()=>[{title:"Create Listing - RunStay Exchange"}];function A(){const{user:t,events:p,googlePlacesApiKey:g}=k(),d=C(),[r,m]=l.useState("room"),[i,j]=l.useState(""),[O,y]=l.useState(!1),[a,v]=l.useState(null),[f,N]=l.useState(null);l.useEffect(()=>{const s=document.getElementById("description");if(s&&i==="other"){s.setCustomValidity(s.value?"":"Required");const n=()=>{s.setCustomValidity(s.value?"":"Required")};return s.addEventListener("input",n),()=>s.removeEventListener("input",n)}},[i]);const c=(()=>{if(!(a!=null&&a.event_date))return{min:void 0,max:void 0};const s=new Date(a.event_date),n=new Date(s);n.setDate(n.getDate()-7);const o=new Date(s);return o.setDate(o.getDate()+7),{min:n.toISOString().split("T")[0],max:o.toISOString().split("T")[0]}})(),x=b(t.user_type,"rooms"),h=b(t.user_type,"bibs"),w=S(t.user_type),u=F(t.user_type,f,r);return e.jsxs("div",{className:"min-h-full bg-gray-50",children:[e.jsx(T,{user:t}),e.jsxs("main",{className:"mx-auto max-w-2xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"font-display text-3xl font-bold text-gray-900",children:"Create a Listing"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Share your available rooms or bibs with the community"})]}),e.jsx("div",{className:"card p-6 sm:p-8",children:e.jsxs(_,{method:"post",className:"space-y-8",onSubmit:()=>y(!0),children:[(d==null?void 0:d.error)&&e.jsx("div",{className:"rounded-lg bg-red-50 p-4 text-sm text-red-700",children:d.error}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"What are you offering?"}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-3",children:[e.jsxs("label",{className:"relative flex cursor-pointer rounded-lg border border-gray-300 bg-white p-4 shadow-sm focus:outline-none hover:border-brand-500 has-[:checked]:border-brand-500 has-[:checked]:ring-1 has-[:checked]:ring-brand-500",children:[e.jsx("input",{type:"radio",name:"listingType",value:"room",className:"sr-only",defaultChecked:!0,onChange:s=>m(s.target.value)}),e.jsxs("span",{className:"flex flex-1 flex-col items-center text-center",children:[e.jsx("svg",{className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("span",{className:"mt-2 text-sm font-medium text-gray-900",children:"Room Only"})]})]}),e.jsxs("label",{className:"relative flex cursor-pointer rounded-lg border border-gray-300 bg-white p-4 shadow-sm focus:outline-none hover:border-brand-500 has-[:checked]:border-brand-500 has-[:checked]:ring-1 has-[:checked]:ring-brand-500",children:[e.jsx("input",{type:"radio",name:"listingType",value:"bib",className:"sr-only",onChange:s=>m(s.target.value)}),e.jsxs("span",{className:"flex flex-1 flex-col items-center text-center",children:[e.jsx("svg",{className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),e.jsx("span",{className:"mt-2 text-sm font-medium text-gray-900",children:"Bib Only"})]})]}),e.jsxs("label",{className:"relative flex cursor-pointer rounded-lg border border-gray-300 bg-white p-4 shadow-sm focus:outline-none hover:border-brand-500 has-[:checked]:border-brand-500 has-[:checked]:ring-1 has-[:checked]:ring-brand-500",children:[e.jsx("input",{type:"radio",name:"listingType",value:"room_and_bib",className:"sr-only",onChange:s=>m(s.target.value)}),e.jsxs("span",{className:"flex flex-1 flex-col items-center text-center",children:[e.jsx("svg",{className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{className:"mt-2 text-sm font-medium text-gray-900",children:"Room + Bib"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Marathon Event"}),e.jsx(D,{events:p,onSelectEvent:s=>{const n=p.find(o=>o.id===s);v(n)}})]}),(r==="room"||r==="room_and_bib")&&e.jsxs("div",{className:"space-y-4",id:"roomFields",children:[e.jsx("h3",{className:"font-medium text-gray-900 border-b pb-2",children:"Room Details"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"Hotel"}),e.jsx(L,{apiKey:g,eventCity:a==null?void 0:a.location,eventCountry:a==null?void 0:a.country,onSelectHotel:s=>{}})]}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"roomCount",className:"label",children:["Number of rooms",x!==null&&t.user_type==="tour_operator"&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(max ",x," for your account)"]})]}),t.user_type==="private"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-brand-100 text-brand-700 font-bold text-2xl",children:"1"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Private users can list 1 room only"})]}),e.jsx("input",{type:"hidden",name:"roomCount",value:"1"})]}):e.jsx("input",{type:"number",id:"roomCount",name:"roomCount",min:"1",max:x||void 0,placeholder:"e.g. 2",className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roomType",className:"label",children:"Room type"}),e.jsxs("select",{id:"roomType",name:"roomType",className:"input",onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"double",children:"Double"}),e.jsx("option",{value:"twin",children:"Twin"}),e.jsx("option",{value:"twin_shared",children:"Twin Shared"}),e.jsx("option",{value:"double_single_use",children:"Double Single Use"}),e.jsx("option",{value:"triple",children:"Triple"}),e.jsx("option",{value:"quadruple",children:"Quadruple"}),e.jsx("option",{value:"other",children:"Other * (specify)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checkIn",className:"label",children:"Check-in date"}),e.jsx("input",{type:"date",id:"checkIn",name:"checkIn",placeholder:"dd/mm/yyyy",min:c.min,max:c.max,className:"input"}),a&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Event date: ",new Date(a.event_date).toLocaleDateString()," (±7 days)"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checkOut",className:"label",children:"Check-out date"}),e.jsx("input",{type:"date",id:"checkOut",name:"checkOut",placeholder:"dd/mm/yyyy",min:c.min,max:c.max,className:"input"})]})]})]}),(r==="bib"||r==="room_and_bib")&&e.jsxs("div",{className:"space-y-4",id:"bibFields",children:[e.jsx("h3",{className:"font-medium text-gray-900 border-b pb-2",children:"Bib Transfer Details"}),t.user_type==="private"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Important:"})," RunOot facilitates connections for legitimate bib transfers only. Direct sale of bibs may violate event regulations."]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bibCount",className:"label",children:["Number of bibs",h!==null&&t.user_type==="tour_operator"&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(max ",h," for your account)"]})]}),t.user_type==="private"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-brand-100 text-brand-700 font-bold text-2xl",children:"1"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Private users can list 1 bib only"})]}),e.jsx("input",{type:"hidden",name:"bibCount",value:"1"})]}):e.jsx("input",{type:"number",id:"bibCount",name:"bibCount",min:"1",max:h||void 0,placeholder:"e.g. 1",className:"input w-full sm:w-48"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transferType",className:"label",children:["Transfer Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),t.user_type==="private"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:"Official Organizer Name Change"}),e.jsx("input",{type:"hidden",name:"transferType",value:"official_process"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"How the bib will be transferred to the new participant"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{id:"transferType",name:"transferType",className:"input",onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"",children:"Select transfer method"}),w.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"How the bib will be transferred to the new participant"})]})]}),u.showAssociatedCosts&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"associatedCosts",className:"label",children:["Associated Costs (€) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"associatedCosts",name:"associatedCosts",min:"0",step:"0.01",placeholder:"e.g. 50",className:"input [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Official name change fee from the event organizer"})]}),u.showPackageInfo&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Package Transfer:"})," The bib is included in your travel package. All costs are included in the package price."]})})]}),!(t.user_type==="private"&&r==="bib")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 border-b pb-2",children:"Price"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"label",children:"Price (€)"}),e.jsx("input",{type:"number",id:"price",name:"price",min:"0",step:"0.01",placeholder:"Empty = Contact for price",className:"input [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(r==="room"||r==="room_and_bib")&&e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"priceNegotiable",className:"h-4 w-4 rounded border-gray-300 text-brand-600 focus:ring-brand-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Price is negotiable"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"label",children:[t.user_type==="private"&&r==="bib"?"Notes":"Additional details"," ",e.jsx("span",{className:i==="other"?"text-red-500":"text-gray-400",children:i==="other"?"(required)":"(optional)"})]}),e.jsx("textarea",{id:"description",name:"description",rows:4,placeholder:"Any other information runners should know...",className:`input ${i==="other"?"required:border-red-500 invalid:border-red-500 focus:invalid:ring-red-500":""}`,required:i==="other"})]}),e.jsx("div",{className:"flex gap-4 pt-4",children:e.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Create Listing"})})]})})]})]})}export{A as default,P as meta};
