import{w as y,u as v,b as j,c as w,r as o,j as e,F as N}from"./chunk-JZWAC4HX-Wpy6LLBq.js";import{H as L}from"./Header-DbNBnIdE.js";import{L as S}from"./ListingCard-UlCRqv1D.js";import{L as C}from"./ListingCardCompact-Bf9JPoRI.js";const M=()=>[{title:"Browse Listings - Runoot"}],P=y(function(){const{user:i,listings:c,savedListingIds:m,events:x}=v(),[u]=j(),p=w(),d=o.useRef(null),a=u.get("type")||"all",t=u.get("search")||"",[l,h]=o.useState(t),[f,n]=o.useState(!1),g=l.length>=2?x.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.country.toLowerCase().includes(l.toLowerCase())).slice(0,5):[];o.useEffect(()=>{function s(r){d.current&&!d.current.contains(r.target)&&n(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const b=s=>{h(s),n(!1);const r=new URLSearchParams;a!=="all"&&r.set("type",a),r.set("search",s),p(`/listings?${r.toString()}`)};return e.jsxs("div",{className:"min-h-full bg-gray-50",children:[e.jsx(L,{user:i}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"font-display text-3xl font-bold text-gray-900",children:"Browse Listings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Find available rooms and bibs for upcoming marathons"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(N,{method:"get",name:"listing-search",className:"flex items-center",children:[e.jsx("input",{type:"hidden",name:"type",value:a}),e.jsxs("div",{className:"relative flex-1 max-w-xl",ref:d,children:[e.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"search",id:"listing-search",name:"search",autoComplete:"off",placeholder:"Search by event name or location...",value:l,onChange:s=>{h(s.target.value),n(!0)},onFocus:()=>n(!0),className:"block w-full rounded-lg border-0 pl-12 pr-4 py-2.5 text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500/20 transition-colors",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}}),f&&g.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 z-20 overflow-hidden",children:g.map(s=>e.jsxs("button",{type:"button",onClick:()=>b(s.name),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.country," â€¢ ",new Date(s.event_date).toLocaleDateString()]})]},s.id))})]}),e.jsx("button",{type:"submit",className:"ml-12 px-8 py-2.5 bg-accent-500 text-white font-medium rounded-full hover:bg-accent-600 transition-all shadow-lg shadow-accent-500/30",children:"Search"})]})}),e.jsx("div",{className:"mb-8 flex flex-wrap gap-2",children:[{value:"all",label:"All"},{value:"room",label:"Hotel"},{value:"bib",label:"Bibs"},{value:"room_and_bib",label:"Package"}].map(s=>e.jsx("a",{href:s.value==="all"?`/listings${t?`?search=${t}`:""}`:`/listings?type=${s.value}${t?`&search=${t}`:""}`,className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${a===s.value?"bg-brand-500 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:s.label},s.value))}),c.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 auto-rows-fr",children:c.map(s=>e.jsx(S,{listing:s,isUserLoggedIn:!!i,isSaved:(m||[]).includes(s.id)},s.id))}),e.jsx("div",{className:"flex flex-col gap-3 md:hidden",children:c.map(s=>e.jsx(C,{listing:s,isUserLoggedIn:!!i,isSaved:(m||[]).includes(s.id)},s.id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No listings found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:t||a!=="all"?"Try adjusting your filters":"Be the first to create a listing!"})]})]})]})});export{P as default,M as meta};
