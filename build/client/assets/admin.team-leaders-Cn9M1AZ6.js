import{w as h,u,a as j,r as b,j as e,F as i}from"./chunk-JZWAC4HX-Dlc7LzsC.js";const v=()=>[{title:"Team Leaders - Admin - Runoot"}],y=h(function(){const{teamLeaders:l,referralCounts:m,tokens:c,stats:x}=u(),t=j(),[n,o]=b.useState(null),d=(s,r)=>{navigator.clipboard.writeText(s),o(r),setTimeout(()=>o(null),2e3)},a=typeof window<"u"?window.location.origin:"";return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"font-display text-2xl md:text-3xl font-bold text-gray-900",children:"Team Leaders"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage team leaders and invite tokens"})]}),t&&"error"in t&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-alert-50 text-alert-700 text-sm",children:t.error}),t&&"token"in t&&e.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-success-50 border border-success-200",children:[e.jsx("p",{className:"text-sm font-medium text-success-800 mb-2",children:"Token generated!"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("code",{className:"text-sm bg-white px-3 py-1.5 rounded border border-success-200 font-mono flex-1 break-all",children:[a,"/become-tl/",t.token]}),e.jsx("button",{onClick:()=>d(`${a}/become-tl/${t.token}`,"new"),className:"btn-secondary text-xs px-3 py-1.5 flex-shrink-0",children:n==="new"?"Copied!":"Copy"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.totalTLs}),e.jsx("p",{className:"text-xs text-gray-500",children:"Team Leaders"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-brand-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.totalReferrals}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Referrals"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display font-semibold text-gray-900",children:"Invite Tokens"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Generate links to invite someone to become a Team Leader"})]}),e.jsxs(i,{method:"post",children:[e.jsx("input",{type:"hidden",name:"_action",value:"generateToken"}),e.jsxs("button",{type:"submit",className:"btn-primary text-sm inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Generate Token"]})]})]}),c.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:c.map(s=>e.jsxs("div",{className:"py-3 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs font-mono text-gray-600 truncate",children:s.token}),s.used_by?e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-700",children:"Used"}):s.expires_at&&new Date(s.expires_at)<new Date?e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"Expired"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:"Active"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Created ",new Date(s.created_at).toLocaleDateString(),s.expires_at&&` 路 Expires ${new Date(s.expires_at).toLocaleDateString()}`]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!s.used_by&&e.jsx("button",{onClick:()=>d(`${a}/become-tl/${s.token}`,s.id),className:"text-xs text-brand-600 hover:text-brand-700 px-2 py-1 rounded bg-brand-50",children:n===s.id?"Copied!":"Copy Link"}),e.jsxs(i,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"deleteToken"}),e.jsx("input",{type:"hidden",name:"tokenId",value:s.id}),e.jsx("button",{type:"submit",className:"text-xs text-red-500 hover:text-red-700 px-2 py-1 rounded hover:bg-red-50",children:"Delete"})]})]})]},s.id))}):e.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No invite tokens yet. Generate one to invite a Team Leader."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:e.jsx("h2",{className:"font-display font-semibold text-gray-900",children:"Active Team Leaders"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:l.length>0?l.map(s=>{var r;return e.jsxs("div",{className:"p-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-700 font-semibold flex-shrink-0",children:((r=s.full_name)==null?void 0:r.charAt(0))||s.email.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[s.full_name||"No name",s.company_name&&e.jsxs("span",{className:"text-gray-400 font-normal",children:[" 路 ",s.company_name]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.email}),s.referral_code&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-300",children:"路"}),e.jsxs("span",{className:"text-xs font-mono text-purple-600",children:["/",s.referral_code]})]}),e.jsx("span",{className:"text-xs text-gray-300",children:"路"}),e.jsxs("span",{className:"text-xs text-brand-600 font-medium",children:[m[s.id]||0," referrals"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.referral_code&&e.jsx("button",{onClick:()=>d(`${a}/join/${s.referral_code}`,`tl-${s.id}`),className:"text-xs text-brand-600 hover:text-brand-700 px-2 py-1 rounded bg-brand-50",children:n===`tl-${s.id}`?"Copied!":"Copy Referral"}),e.jsxs(i,{method:"post",className:"inline",children:[e.jsx("input",{type:"hidden",name:"_action",value:"toggleTeamLeader"}),e.jsx("input",{type:"hidden",name:"userId",value:s.id}),e.jsx("input",{type:"hidden",name:"currentStatus",value:"true"}),e.jsx("button",{type:"submit",className:"text-xs text-red-500 hover:text-red-700 px-2 py-1 rounded hover:bg-red-50",onClick:p=>{confirm(`Remove Team Leader status from ${s.full_name||s.email}?`)||p.preventDefault()},children:"Remove TL"})]})]})]},s.id)}):e.jsxs("div",{className:"p-8 text-center text-gray-400 text-sm",children:["No team leaders yet. Promote users from the"," ",e.jsx("a",{href:"/admin/users",className:"text-brand-600 hover:underline",children:"Users page"})," ","or generate an invite token above."]})})]})]})});export{y as default,v as meta};
